第 5 章 运输层

本 章 先概括 介 绍 运输层协 议的特 点、 进程之 间 的通信和端口等重要 概 念 ， 然后讲 述比
较简单的 UDP协议。 其余的篇 幅 都是 讨 论较为复杂但非常重要的 TCP协 议 CD和可靠传输的工
作 原理， 包 括 停 止 等 待 协 议和 A RQ 协议。 在详细讲述 TCP 报 文 段的首部格 式 之后， 讨 论

TCP的三个重要问题： 滑动 窗口、 流量控制和拥塞控制机制。 最后， 介 绍 TCP的连接管理。
运输层是 整个网络体系结构中的关键层次之一。 一定要弄清以下一 些 重要概 念：
(1 ) 运输层为相 互通信的应 用 进程 提供逻辑通信。
( 2) 端 口和套接字的意 义。

(3) 无连接的 UDP的特 点。

(4 ) 面向连接的 TCP的特点。

( 5 ) 在不可靠的网络 上实现可靠传输的工作原理， 停 止 等 待 协 议和A RQ 协 议。

( 6 )  TCP的滑动 窗口、 流最控制 、 拥 塞控 制和连接管 理。

运输层协议概述

5 . 1

5. 1 . 1   进程之 间 的 通信

从通信和信 息处理的角 度看， 运输层 向 它 上 面 的 应 用 层 提 供 通 信 服 务 ， 它 属千面向通

信部分的最高层， 同 时也是 用 户 功(cid:7126)中的最低层。 当网络边缘部分的两 台 主机使用网络 核 心

部分的功(cid:7126)进行端到端的通信时， 都要使用协议 栈中的运输层， 而网络 核 心部分中的路由器

在转发分组时只用到下三层的功(cid:7126)。

下面通过图 5-1 的示 意图来说明运输层的作用。 设 局 域网 LAN 1 上的主机 A 和局 域 网

LAN 2 上的主机 B 通过互 连的广 域网 WAN 进行通信。 我们知道，IP协议(cid:7126)够把源主机A 发

送出的分组， 按照首部中的目的地址， 送交到 目的主机 B, 那 么 ， 为什么 还需要运输层呢？

从IP层来说， 通信的两端是 两 台主机。 IP数据报的首部明确地标 志了这 两 台主机的IP

“ 两 台主机之间的通信

这种说法还不够明确。 真 正进行通信的实体是 在主机中的
地址。 但
哪个构件 呢？ 是主机中的应用进程， 是 一 台 主机中的应 用 进程和另 一 台 主机中的应 用 进程在
交换数据（即 通信）。 因此严 格地讲， 两 台 主机进行通信 就是两 台 主机中的应 用 进程互相通

”

信。 IP 协 议 虽 然(cid:7126)把分 组送到 目 的主 机， 但是这个分组还 停 留 在 主机的网络层而没有交付

主机中的应用进程。 通信 的 两端应 当 是两个主机 中 的 应 用 进程。 也就是说， 端 到 端 的 通信是
应用进程之间的通信 。 在一 台 主机中经常有多个应用进程同 时分别和另 一 台 主机中的多个应
用进程通信。 例如， 某用户 在使用 浏 览器查找某网站的信 息时， 其主机的应用层运行浏 览器

客 户 进程。 如果在浏 览 网 页的 同时， 还要用 电子邮件给网站发送反馈意见， 那 么 主机的应用

＄ 注 ： 运 输 层 最 近 又增 加 了 第 三 种 协 议 ， 即 流控制传输协议 SCTP (Stream  Control  Transmission  Protocol)  [RFC 4960 , 建 议

标准］ ， 它 具 有 TCP 和 UDP 协 议 的 共 同 优 点 ， 可 支 持

一

些 新 的 应 用 ， 如 IP 电 话 。 限 千 篇 幅 ， 这 里 不 再 介 绍 。

•  21 1  •

