制 定 互 联网的正式标准要经过 以 下三个 阶段：
( 1 ) 互联网草案(Internet Draft)一一互联网草 案的有效 期 只 有六个 月 。 在这个 阶段还不能

算是 RFC 文 档。

(2) 建议标准(Proposed Standard)一从这个 阶段开始就成为 RFC 文 档。
(3) 互联 网标准(Internet Standard)

如 果经过长期的检验 ， 证 明 了 某 个 建 议 标准 可 以
成 为 互联 网 标准 时 ， 就给它分配 一个标准编号， 记 为 STDxx , 这里 STD 是 “ Standard " 的
英 文缩 写 ， 而 “ xx " 是标准的编 号 （有时 也 写 成 4 位数编号， 如 STD0005 )。 一 个 互联网
标准可 以和 多 个 RFC 文 档 关联。

原 先 制 定 互联 网 标 准的过程 是 ：

“

”

一

“

草 案 标 准

”

一

“

互 联网 标准

”
。 由千

草案标准

”

草案标准
“

“

“

一

容 易 和成为 RFC 文 档 之 前的

互联网 草 案

”

混淆， 从 201 1 年 1 0 月 起取消 了

” 这个阶段 [RFC 64 1 0]。 这样， 现在 制 定 互 联网标准的过程 简 化 为 ：

“

建议标准

”

互 联网 标 准

”
。 在新的规 定 以 前就 已发布的草 案 标 准 ， 将 按 照 以 下 原 则 进行 处理： 若 已

建 议 标 准
“

达到互联网标准， 就 升 级 为 互 联网 标 准 ； 对 目 前 尚 不够互联网 标 准 条件的， 则 仍 称 为发布 时

的 旧 名 称

“

草 案 标 准

”
。 我 们 可 以 很方便地在网 上 查 到有哪 些 RFC 文 档 是 互 联网 标 准 [W­

RFCS]。 截止到 2019年 1 1 月 ， 互联网标准的最大编号 是 STD92。 可 见要成为 互 联网 标准还

是很不容 易的。

除 了 建议标准和互联网 标准 这两 种 RFC 文 档 ， 还有三种 RFC 文 档 ， 即 历 史的、 实验的

和提供信 息的 RFC 文 档。 历 史的 RFC 文 档 或者是 被 后 来的规约 所取代， 或者是从未达到必

要的成熟等级 因 而 始 终未变成为互联网 标准。 实 验的 RFC 文 档 表 示其工作 处千正在 实验的

情 况， 而 不能够在任何实用的互 联网 服务 中 进 行 实 现。 提供信 息的 RFC 文 档 包括与 互联网
有关的一般的、 历 史的或指导的信 息。

RFC 文 档的数量很大， 为 便 于 查找， 最好 利 用 索 引 文件 “ RFC INDEX "  [W-RFCX]。 这
个索 引 文件一 直在不 断 更新， 它 给出 了 迄今 已发布的所有的 RFC 文 档的标题 、 发表 时 间 、
类 别 ， 以及这个 RFC 文 档 更新 了 哪个老的 RFC 文 档 ， 或者被在 它 以 后发表的哪 个 RFC 文

档 更新 了 。 这个文件按 RFC 编号的顺序是大编号在前而小编号在 后 ， 也 就是把最新编号的

RFC 文 档 放在 最前面， 便千大 家 最 先看到最新的 RFC 文 档。

1 . 3  互 联 网 的 组成

互 联网的拓 扑 结 构 虽然非 常 复 杂 ， 并 且在地理上 覆 盖 了 全 球 ， 但从 其

工 作 方式 上看， 可 以 划 分 为 以 下 两大块：

视频讲解

( 1 ) 边缘部分 由所有连接在 互 联网 上的主机组成。 这 部 分 是 用 户 直接使 用 的 ， 用 来进

行通信 （传送数据 、 音 频或视频） 和 资 源共享。

(2) 核心部分 由大量网络和连接这些网络的路由器组成。 这 部 分 是 为 边缘部分提供服

务 的 （提供连通性和交换 ）。

图 1 -4 给出 了 这两 部 分的示意图。 下 面 分 别 讨 论 这 两 部 分的作 用 和工作 方 式。

•  9 .

图 1 -4 互联 网 的 边缘 部分 与 核 心 部 分

1 .3 . 1  互 联 网 的 边缘部分

”

处在 互 联网边缘的部分就是连接在 互 联网上的所有的主机。 这些主机又 称 为 端 系统(end
就 是 “ 末 端 ＂ 的意思 （即 互 联 网的末端 ）。 端 系 统 在 功能上可能有很大的差
system) , “ 端
别 ， 小 的端 系 统 可 以 是一 台 普通个人电脑 （包括笔记本电脑或平板电脑 ） 和 具有上网功能的
智 能手机， 甚至是一个很小的网络摄像头 （可 监视当地的天气 或交通情 况 ， 并在 互 联网上 实
时发布 ）， 而大的端 系 统 则 可 以 是 一 台 非 常 昂 贵的大型 计算机（这样的 计算机通 常 称 为 服 务
器 server ) 。 端 系 统的拥有者 可 以 是个人 ， 也 可 以 是单 位 （如学校、 企业、 政府机关 等 ）， 当
然也 可 以 是某个 ISP （ 即 ISP 不仅仅 是 向 端 系 统提供服务 ， 它 也 可 以 拥有一 些端 系 统 ）。 边
缘 部 分利 用 核 心 部 分所提供的服务 ， 使 众 多 主机之 间 能够 互相 通信 并交换或共享信 息 。 值得

注意的是 ， 现今大部分能够 向 网 民 提供信 息检索、 万 维 网 浏 览 以及视频播 放等 功能的服务器 ，
都 不 再 是 一 个孤立的服 务 器 ， 而 是 属 千 某 个大型 数据中心 。 例 如 ， 谷 歌 公 司 (Google)拥有上
百 个 数据中心 ， 而其中的 1 5 个大型数据中心的每 一个都拥有 1 0 万 台 以 上的服务器 。 又 如 ，
我 国 的百 度 公 司 在 山 西 阳 泉建造的数据中心拥有 1 6 万 台 服务 器 。

我们 先 要 明 确 下 面的概念 。 我们 说 ： “

在 主机 A 上的某个程序和运 行在 主机 B 上的另 一个程序进行通信
“
行 着的程序 “， 因 此这也就是指：
这种 比 较严密的说法通常可 以 简称为

”

“

。

主机 A 和主机 B 进 行通信 “， 实 际上 是指： ” 运 行
就是 “ 运
。

主机 A 的 某个进程和 主机 B 上 的 另 一个进程进行通信

。 由于 “

进程

”

”

”

计算机 之 间通信
在 网络边缘的端 系 统 之 间 的通 信 方 式通 常 可 划 分 为 两大类 ： 客 户 —服 务 器 方 式 ( C/S 方

式 ） 和对等方式 ( P2P 方 式 ） 气 下 面分 别 对这两种方式进 行 介 绍 。

1 . 客户 －服务器方式

这 种 方 式在 互 联 网 上 是 最 常 用 的 ， 也 是 传 统的方 式 。 我们在 上 网发送电子邮件或在 网

站上查找 资 料 时 ， 都使用 客 户 －服务器方式（有时 写 为 客 户 ／服务器方式 ）。

当 我们 打 电话 时 ， 电话机的振铃声 使 被 叫 用 户 知 道 现在有一 个电话 呼 叫 。 计算机通信
的对 象是应用 层中的应用 进程 ， 显然不能用 响 铃的办法来通知所要找的对方的应 用 进程 。 然

＠ 注 ： C/S 方式表示 ClientJServer 方 式 ， P2P 方式表示 Peer-to-Peer 方 式 。 有时还可看 到 另 外 一 种 叫 作 浏 览 器 －服 务 器方 式 ，

即 8/S 方式 ( Browser/Server 方 式 ） ， 但这仍然是 C/S 方 式 的 一 种特例 。

•  1 0  •

I

而 采 用 客 户 －服务器方式可 以 使 两 个应 用 进 程 能 够 进 行通信 。

客 户 (client)和 服 务 器(server) 都 是 指 通 信 中 所 涉 及 的 两 个 应 用 进 程 。 客 户 － 服 务 器 方 式 所
描 述 的 是进 程 之 间 服 务 和 被 服 务 的 关 系 。 在 图 1 -5 中 ， 主机 A 运 行 客 户 程 序 而 主 机 B 运行

服 务 器程序 。 在 这种情况 下 ， A 是 客 户 而 B 是服 务 器 。 客 户 A 向 服 务 器 B 发 出 请求 服 务 ，
而 服 务 器 B 向 客 户 A 提 供 服 务 。 这 里 最 主 要 的特 征 就 是 ：

客 户 是 服务请 求 方 ， 服务器是服务提供方。

服 务 请 求 方 和 服 务 提 供 方 都 要 使 用 网 络 核 心 部 分所提供 的 服 务 。

运 行 客 户 程序

巨三户五｀

尸
\A 飞
-........
........ -
＠ f导至u»ii-;;•···..
＇， 一 二」 ．．．．．．．．．． ．．．．．．．．  B ｀
-.-.-:.-.：：J?七， ＇

心·:::::.-_·: . . . �.！,．求服务
-、、-

， 运 行 服 务器程序

客户

-

，

/ 、、一I

网 络核心

月：

,

一1

＿ ，一，夕

图 1 -5 客 户 －服 务 器工 作 方 式

在 实 际 应 用 中 ， 客 户 程序 和 服 务器 程 序 通 常 还 具 有 以 下 一些 主 要 特 点 。
客户程序 ：

( 1 ) 被 用 户 调 用 后 运 行 ， 在 通 信 时 主 动 向 远 地 服 务 器 发 起 通 信 （ 请 求 服 务 ） 。 因 此 ， 客

户 程序 必 须 知 道 服务器程序 的 地址 。

(2) 不 需 要 特 殊 的 硬 件 和 很 复 杂 的 操作 系 统 。

服 务 器程序 ：
( 1 ) 是 一 种 专 门 用 来提 供某 种 服 务 的程序 ， 可 同 时处理 多 个远地或 本 地 客 户 的 请 求 。
(2) 系 统 启 动 后 即 一 直 不 断 地运 行 着 ， 被动 地 等 待 并接 受 来 自 各地 的 客 户 的 通信 请 求 。

因 此 ， 服务器程序 不 需 要 知 道客 户 程 序 的 地址 。

(3) 一般 需 要 有 强 大 的 硬 件 和 高 级 的 操作 系 统 支 持 。
客 户 与 服 务 器 的 通 信 关 系 建 立 后 ， 通 信 可 以 是 双 向 的 ， 客 户 和 服 务 器 都 可 发 送 和 接 收

数 据 。

“

机 的 人 是 计 算 机 的
运 行 客户 程序 的机器称为 client

顺 便 要 说 一 下 ， 上 面 所 说 的 客 户 和 服 务 器 本 来 都指 的 是计算机进程 （ 软件 ） 。 使 用 计 算
” (user) 而 不 是 “ 客 户 ” (client) 。 但 在 许 多 国 外 文 献 中 ， 经 常 也 把
” ) ， 把运行服务
器程序 的 机 器 也 称 为 server 。 因 此我们 应 当 根据 上 下 文 来判 断 client 或 server 是 指 软件 还 是
”

（ 在这 种情 况 下 也 可 把 client 译 为 “ 客 户 机

用 户

“

＂

”

“

硬 件 。 在 本 书 中 ， 在 表 示 机 器 时 ， 我 们 也 使 用

服 务 器 端

客 户 端
“

（ 或 “ 客 户 机
运 行 服务器程序 的 机 器

) 或
”

。

（ 或服 务器 ） 来 表 示

“

运 行 客 户 程序 的 机 器

”

或

2 . 对等连接方式

对等连接 ( peer-to-peer , 简 写 为 P2P 。 这 里 使 用 数 字 2 是 因 为 英文 的 2 是 two , 其读音

•  1 1  •

与 to 同 ， 因 此英 文 的 to 常 写 为 数 字 2 ) 是 指 两 台 主 机 在通信 时 ， 并 不 区 分 哪 一 个 是 服 务 请
求 方 和 哪 一 个 是 服 务 提 供 方 。 只 要 两 台 主 机 都 运 行 了 对 等 连接 软 件 ( P2P 软件 ） ， 它 们 就 可
以 进 行 平 等 的 对 等 连接通 信 。 这 时 ， 双 方 都可 以 下 载对 方 已 经 存 储 在 硬 盘 中 的 共 享 文 档 。 因
此这 种 工 作 方 式 也 称 为 P2P 方式 。 在 图 l -6 中 ， 主 机 C, D, E 和 F 都运 行 了 P2P 程序 ， 因 此
这 几 台 主 机 都 可 进 行 对 等 通 信 （ 如 C 和 D , E 和 F , 以 及 C 和 F ) 。 实 际上 ， 对 等连接方式
从 本 质 上 看 仍 然 使 用 客 户 － 服 务 器 方 式 ， 只 是 对 等 连接 中 的 每 一 台 主机 既 是 客 户 同 时 又 是 服
务 器 。 例 如 主 机 C , 当 C 请 求 D 的 服 务 时 ， C 是 客 户 ， D 是 服务器 。 但 如 果 C 又 同 时 向 F

提 供服 务 ， 那 么 C 又 同 时 起着 服 务器 的 作 用 。

------ ------- - - -

-

网 络 边缘 ＼：、一＿一、 运 行 P2P程序

一｀ 、尸/－

`、、、

人 ，

“仁

1

' ，'>\～

运 行 P2 P 程序 ， 夕_,E
共
}, ＿＿--, i  /

l
-二习

l
／

,',

／

/

'，

I

/

/
/  网 络核 心

/

:，
I

l
I
I
l
l
I

震农， 心兮人 ，

享- ,:
;
`，
＇
§
＇，：
飞

，
,＇,＇

,

、｀

F

＿
运 行 P2 P程）于 //

,/／
一 少
I

_

Il
｀ 人一I

D、L卜一—一— 运 行 P2P程序

-21.f:fil

,,-

图 1 -6 对 等 连接 工 作 方 式 ( P2 P 方 式 ）

对 等 连接 工 作 方 式 可 支 持 大 量 对 等 用 户 （ 如 上 百 万 个 ） 同 时 工 作 。 关 千 这 种 工 作 方 式

我们 将 在 后 面 第 6 挛 的 6.9 节进 一 步讨 论 。

1 .3 .2  互联 网 的 核 心 部 分

网 络 核 心 部 分 是 互 联 网 中 最 复 杂 的 部 分 ， 因 为 网 络 中 的 核 心 部 分 要 向 网 络 边缘 部 分 中

的 大量 主 机提 供 连 通性 ， 使边缘部分 中 的 任 何一 台 主 机 都 能 够 与 其 他 主 机 通信 。

在 网 络 核 心 部 分 起 特 殊 作 用 的 是 路 由 器 ( router ) ， 它 是 一 种 专 用 计 算 机 （ 但 不 叫 作 主

机 ） 。 路 由 器 是 实 现 分组交换 ( packet switching ) 的 关 键 构 件 ， 其 任 务 是转 发 收到 的 分组 ，

这 是 网 络 核 心 部 分 最 重 要 的 功 能 。 为 了 弄清 分 组 交 换 ， 下 面 先 介 绍 电路交 换 的 基 本概 念 。

1 . 电路交换的 主要特点

在 电话 问 世后 不 久 ， 人们就发现 ， 要让所有 的 电话机都两两相连接是不现实 的 。 图 1 -7(a)
表 示 两 部 电话 只 需 要 用 一 对 电线 就 能 够 互 相 连接起来 。 但 若 有 5 部 电话 要 两 两 相 连 ， 则 需 要
1 0 对 电 线 ， 如 图 l -7(b)所示 。 显 然 ， 若 N 部 电 话 要 两 两 相 连 ， 就 需 要 N(N — 1 )/2 对 电线 。 当

电话机 的 数 量 很 大 时 ， 这 种 连接 方 法 需 要 的 电 线 数量 就 太大 了 （ 与 电话机 的 数量 的 平 方 成 正
比 ） 。 于 是 人 们 认 识 到 ， 要 使 得 每 一 部 电 话 能 够 很 方 便 地 和 另 一 部 电 话 进 行 通信 ， 就应 当 使
用 电话 交换机将 这 些 电 话 连 接 起 来 ， 如 图 l -7(c)所示 。 每 一部 电话 都 连接 到 交换 机上 ， 而 交
换 机 使 用 交换 的 方法 ， 让 电话 用 户 彼 此之 间 可 以 很 方 便地通信 。 电话发 明 后 的 一 百 多 年 来 ，
电 话 交换 机 虽 然 经 过 多 次 更 新 换代 ， 但 交 换 的 方 式一 直 都 是 电路交 换 (circuit switching) 。

•  1 2  •

盒

雪

(a)

(b)

(c)

(a) 两 部 电 话 直接 相 连

(b) 5 部 电话两两直 接 相 连

(c) 用 交换 机 连接许 多 部 电话

图 1 -7 电 话 机 的 不 同 连接方法

当 电 话 机 的 数 量 增 多 时 ， 就 要 使 用 很 多 彼 此 连 接 起 来 的 交 换 机 来 完 成 全 网 的 交 换 任 务 。

用 这样 的 方 法 ， 就 构 成 了 覆 盖 全 世 界 的 电信 网 。

从 通信 资 源 的 分 配 角 度 来看 ， 交 换(switching)就 是 按 照 某 种 方 式动 态地 分 配 传 输线 路 的

资 源 。 在 使 用 电路交换打 电 话之 前 ， 必 须 先 拨 号 请 求 建 立 连接 。 当 被 叫 用 户 听 到 交换机送来
的 振铃音 并摘机后 ， 从主 叫 端 到 被 叫 端就 建 立 了 一条 连 接 ， 也 就 是一 条 专 用 的 物理通路 。 这
条连接保证 了 双 方 通 话 时 所 需 的通 信 资 源 ， 而这 些 资 源 在 双 方通 信 时 不 会被 其 他用 户 占 用 。

此后 主 叫 和 被 叫 双 方 就 能 互相 通 电话 。 通 话 完 毕 挂 机 后 ， 交 换 机 释 放 刚 才使 用 的 这 条 专 用 的

物 理通 路 （ 即 把 刚 才 占 用 的 所有 通 信 资 源 归 还给 电信 网 ） 。 这 种 必 须 经 过
“
通 信 资 源 ） 一 通话 （ 一直 占 用 通信 资 源 ） 一释放连接 （ 归 还 通 信 资 源 ）
式 称 为 电路 交 换
。 如 果 用 户 在 拨 号 呼 叫 时 电 信 网 的 资 源 已 不 足 以 支 持 这 次 的 呼 叫 ， 则 主 叫
用 户 会 听 到忙音 ， 表 示 电信 网 不接 受用 户 的 呼 叫 ， 用 户 必 须 挂 机 ， 等 待 一 段 时 间 后 再 重 新 拨

三 个 步 骤 的 交换 方

建立连接 （ 占 用

＠

“

号 。

图 1 -8 为 电路 交 换 的 示 意 图 。 为 简 单起 见 ， 图 中 没有 区 分 市 话 交 换 机 和 长途 电 话 交 换 机 。

应 当 注 意 的 是 ， 用 户 线 是 电话用 户 到所连接 的 市 话 交 换 机 的 连接线 路 ， 是 用 户 独 占 的 传送 模

拟信 号 的 专 用 线 路 ， 而 交 换 机之 间 拥 有 大量话路 的 中 继 线 （ 这 些传输线路早 已 都数 字 化 了 ）
则 是许 多 用 户 共享 的 ， 正 在 通 话 的 用 户 只 占 用 了 中 继 线 里面 的 一 个话路 。 电 路 交换 的 一个 重
要 特 点 就是在通话 的全部时 间 内 ， 通话的两个用 户始终 占用 端 到 端 的通信资源 。

电信网

A

石 叩－

交换机

交换机

交换机

交换机

--对J`． -，压-

B

用 户 线

用 户 线

中 继线

图 1 -8 电 路 交换 的 用 户 始终 占 用 端 到 端 的 通 信 资 源

当 使 用 电 路 交 换 来 传 送 计 算 机数 据 时 ， 其线路 的 传输效率往往很低 。 这 是 因 为 计 算 机

＠ 注 ： 电 路 交 换 最 初 指 的 是 连 接 电 话 机 的 双绞 线 对 在 交 换 机 上 进 行 的 交 换 （ 交 换 机 有 人 工 的 、 步 进 的 和 程控 的 ， 等 等 ） 。

后 来 随 着 技 术 的 进 步 ， 采用 了 多 路 复用 技 术 ， 出 现 了 频 分 多 路 、 时 分 多 路 、 码 分 多 路 等 ， 这 时 电 路 交 换 的 概念就扩 展 到 在 双 绞 线 、

铜 缆 、 光 纤 、 无线媒体 中 多 路信 号 中 的 某 一 路 （ 某 个 频 率 、 某 个 时 隙 、 某 个码 序 等 ） 和 另 一 路 的 交换 。

• 1 3  •

数据 是 突 发式地 出 现 在 传 输 线 路 上 的 ， 因 此 线 路 上 真 正 用 来 传 送 数 据 的 时 间 往 往 不 到 1 0%

甚 至 1 % 。 已 被 用 户 占 用 的 通 信 线路 资 源在 绝 大 部 分 时 间 里 都是 空 闲 的 。 例 如 ， 当 用 户 阅 读
终端屏 幕上 的 信 息 或用 键盘 输 入 和 编 辑 一 份 文件 时 ， 或 计 算 机 正 在 进 行 处 理而 结 果 尚 未 返 回
时 ， 宝 贵 的 通 信 线 路 资 源 并 未 被利 用 而 是被 臼 白 浪 费 了 。

2 . 分组交换的主要特点

分 组 交 换 则 采用 存储转 发 技 术气 图 1 -9 表示把 一个 报 文 划 分 为 几 个 分

组 后 再 进 行 传 送 。 通 常 我 们 把 要 发 送 的 整 块 数 据 称 为 一 个 报 文 (message) 。
在 发送 报 文 之 前 ， 先 把较 长 的 报 文 划 分 为 一 个 个 更 小 的 等 长 数 据 段 ， 例 如 ，
每 个 数 据 段 为 1 024 bit气 在 每 一 个 数 据 段 前 面 ， 加 上 一 些 必 要 的 控 制 信 息 组 成 的 首 部
”
“ 包头
(header) 后 ， 就 构 成 了 一 个 分组(packet) 。 分 组 又 称 为 “ 包
是 非 常 重 要 的 ， 正 是 由 千 分 组 的 首 部
分 组 是 在 互 联 网 中 传 送 的 数据 单元 。 分组 中 的
包 含 了 诸如 目 的 地 址 和 源地 址 等 重 要 控 制 信 息 ， 每 一 个 分 组 才 能 在 互联 网 中 独立地选择传输
路 径 ， 并 被 正 确 地 交 付到 分组传输 的 终 点 。

， 而 分 组 的 首 部 也 可 称 为

首 部

“

”

”

。

报文

发送

在前

巨

分组

分组

分组

图 1 -9 以 分组 为 基 本 单 位 在 网 络 中 传送

图 1 - 1 O(a)强 调 互 联 网 的 核 心 部 分 是 由 许 多 网 络 和 把 它 们 互 连 起 来 的 路 由 器 组 成 的 ， 而
主 机 处 在 互 联 网 的 边 缘 部 分 。 在 互联 网 核 心 部 分 的 路 由 器之 间 一 般 都 用 高速链路相 连接 ， 而
在 网 络边缘 部 分 的 主机接入 到 核 心 部 分 则 通 常 以 相 对较低速 率 的 链路相连接 。

位 于 网 络 边 缘 部 分 的 主 机 和 位 千 网 络 核 心 部 分 的 路 由 器 都 是 计 算 机 ， 但 它 们 的 作 用
却 很 不 一样 。 主机是为 用 户 进行信息处理的 ， 并 且 可 以 和 其他主机通过 网 络 交换信 息 。 路 由
器 则 用 来 转 发 分组 ， 即 进行分组交换 。 路 由 器 收 到 一 个分组 ， 先 暂 时存储 一 下 ， 检 查 其 首 部 ，
查 找 转 发 表 ， 按 照 首 部 中 的 目 的地址 ， 找 到 合适 的 接 口 转 发 出 去 ， 把分组交给 下 一个路 由 器 。
这 样 一 步 一 步地 （ 有 时 会经 过 几 十 个 不 同 的 路 由 器 ） 以 存 储转 发 的 方 式 ， 把 分 组 交 付 最 终 的
目 的 主 机 。 各路 由 器之 间 必 须经 常 交换 彼 此 掌 握 的 路 由 信 息 ， 以 便 创 建 和 动 态 维护 路 由 器 中

句 江 ： 存储转 发 的 概 念 最 初 是 7·

1 964 年 8 月 由 巴兰（ Baran)在 美 国 兰 德( Rand) 公 司 的 “ 论 分 布式通信 ” 的 研 究报 告 中 提 出

的 。 在 1 962- 1 965 年 间 ， 美 国 国 防 部 远 景 研 究 规 划 局 DARPA 和 英 国 国 家 物 理 实 验 室 N P L 都 在 对 新 型 的 计 算 机通 信 网 进行 研 究 。

1 966 年 6 月 ， N PL 的 戴维 斯( Davies) 首 次提 出 “ 分 组 ” ( packet)这 一 名 词 [DAV I 86] 。

1 969 年 1 2 月 ， 美 国 的 分组交换 网 ARPANET

（ 当 时 仪 布 4 个节占 ） 投 入 运 行 。 从此 ， 计算 机 网 络 的 发 展 就 进 入 了 一 个崭新 的 纪 兀 。

1 973 年 英 国 国 家 物理实验室 NPL 也开通

了 分 组 交 换 试 验 网 。 现 在 大 家 都 公 认 A R PANET 为 分 组 交 换 网 之 父 。 除 英 美 两 国 外 ， 法 国 也 在 1 973 年 开 通 其 分 组 交 换 网

CYCLA D E S 。

＠ 汪 ： ｛！本 书 中 ， bit 表 示 “ 比特 ”。 行 计 钾 机 领域 中 ， bit 常 译 为 ＂ 位 ＂ 。 在 许 多 情 况 下 ， “ 比特 ” 和 “ 位 ” 可 以 通 用 。 在 使

用 ” 位 ” 作 为 单位 时 ， 请 根 据

卜 卜 义特 别 汪 惹 是 一进制 的 ＂ 位 ” 还 是 十 进 制 的 ＂ 位 ”。 请 注 意 ， bit 在 表 示 信 息 量 （ 比特 ） 或 信 息
气

＿

传输速率 （ 比特／秒 ） 时 不 能 译 为 ＂ 位 ”。

•  1 4  •

的转发表 ， 使得转发表能够 在 整 个 网 络 拓 扑发生变化 时 及 时 更 新 。

H 1

(a)

H3 I

一1

(b)

(a) 核 心 部分 中 的 路 由 器把许 多 网 络互连起来

(b) 核 心 部 分 中 的 网 络可 用 一 条链路表示

图 1 - 1 0 分组交换 的 示 意 图

当 我 们 讨论 互 联 网的核 心 部 分 中的路由器 转发分 组 的 过程 时 ， 往 往 把 单 个的网 络 简 化
成 一条链路 ， 而 路 由 器 成 为 核 心 部 分的节 点 ， 如 图 1 - 1 O(b) 所 示 。 这 种 简 化 图看起 来 可 以 更
加 突 出重点 ， 因 为 在 转发分 组 时 最 重 要 的 就是 要 知 道 路由器之 间 是怎样连接起来的。

现 在 假 定 图 1 - 1 O(b)中的主机 凡 向 主机 儿 发送数据 。 主机 凡 先将分组逐个地发往 与 它
直接相 连的路由器 A 。 此 时 ， 除链路 H 1-A 外 ， 其他通信 链路 并不被 目 前通信的双方所 占 用 。
需 要注意的是 ， 即 使是链路 H I -A ， 也 只 是 当 分组正 在 此链路上传送 时 才 被 占 用 。 在 各 分 组

传送之 间的空 闲 时 间 ， 链路 H 1-A 仍可为其他主机发送的分组使 用 。

路由器 A 把主机 凡 发来的分组 放入缓存 。 假 定 从路由器 A 的转发表 中 查 出应把该分组
转发到链路 A-C 。 千是分 组就传送到路由器 C 。 当 分组正在 链 路 A-C 传送 时 ， 该 分组 并 不
占 用 网 络其他部分的资 源 。

路由器 C 继 续 按 上 述 方 式 查 找 转发表 ， 假 定 查 出应转发到路由器 E 。 当 分组到达路由

器 E 后 ， 路由器 E 就最后把分组直接交给主机 H沪

假 定 在 某一 个分组的传送过程 中 ， 链 路 A-C 的通信量太大， 那 么 路由器 A 可 以 把分组
沿 另 一个路由传送 ， 即 先 转发到路由器 B , 再转发到路由器 E , 最 后 把分组送 到主机 H沪
在 网络中可 同 时有多 台 主机进行 通信 ， 如 主机 儿 也 可 以经过路由器 B 和 E 与 主机 儿 通信 。
这 里 要 注意， 路 由 器 暂 时存储的是 一 个 个 短 分 组 ， 而 不 是 整 个的长 报 文 。 短 分 组 是 暂

存在路由器的存储器 （即 内存 ） 中 而 不 是存储在 磁盘 中的。 这就保证 了 较 高的交换速 率 。

在 图中 只 画 了 一对 主机 H 1 和 压 在进行通信 。 实 际上 ， 互 联 网 可 以 容许 非 常 多的主机同
时进行通信 ， 而 一 台 主机 中的多 个进程（即正在 运 行 中的多 道程序 ） 也 可 以 各 自 和不 同 主机
中的不 同 进程进行通信 。

应 当 注意， 分 组 交 换 在 传 送 数据 之 前不 必 先 占 用 一 条端 到端的通 信 资 源 。 分 组 在 哪 段
链 路 上传送才 占 用 那 段链路的通信 资 源 。 分 组到达一 个路由器 后 ， 先 暂 时存储下 来 ， 查找转
发表 ， 然后 从 另 一 条合适的链路转发出去 。 分组在传输时 就这样逐段地断 续 占 用 通信 资 源 ，
而 且 还省 去 了 建立连接和 释 放连接的开销 ， 因 而 数据的传输效 率 更 高 。

互 联 网 采取 了 专 门的措施 ， 保证 了 数据的传送具有非 常 高的可 靠性 （在第 5 章 5 .4 节介
绍 运输 层 协 议 时 要 着 重讨论这 个 问 题 ）。 当 网络 中 的某 些 节点或链 路 突 然 出 故 障 时 ， 在 各 路

•  1 5  •

由 器 中 运行 的 路 由 选择协议(protocol)能够 自 动 找 到 转 发 分组 最 合 适 的 路径 。 这些将 在 第 4 章
4.5 节 中 详细 讨 论 。

从 以 上 所 述 可 知 ， 采 用 存 储 转 发 的 分 组 交 换 ， 实 质 上 是 采 用 了 在 数 据 通信 的 过 程 中 断
续 （ 或动态 ） 分配传输带 宽 的 策略 （ 关 千 带 宽 的 进一 步 讨 论 见 后 面 的 1 .6. 1 节 ） 。 这对传送突
发 式 的 计 算机 数 据 非 常 合 适 ， 使得通信 线 路 的 利 用 率 大 大提 高 了 。

为 了 提 高 分 组 交 换 网 的 可 靠 性 ， 互 联 网 的 核 心 部 分 常 采 用 网 状 拓 扑 结 构 ， 使 得 当 发 生

网 络拥 塞 或 少 数 节 点 、 链 路 出 现 故 障 时 ， 路 由 器 可 灵 活 地 改 变 转 发 路 由 而 不 致 引 起通信 的 中
断 或 全 网 的瘫痪 。 此 外 ， 通 信 网 络 的 主 干 线 路往 往 由 一 些 高速链路构 成 ， 这 样 就 可 以 较 高 的
数据 率 迅速地传 送 计 算机数据 。

电
子
工
业

综上所述 ， 分 组 交换 的 主 要 优 点 可 归 纳 如 表 1 - 1 所示 。

优点

所 采 用 的手段

表 1 -1 分组 交换 的优点

高效

灵 活

迅 速

可 靠

在 分 组 传 输 的 过 程 中 动 态 分 配 传 输 带 宽 ， 对 通信 链路逐段 占 用

为 每 一 个 分 组 独立地选 择 最 合 适 的 转 发 路 由

以 分 组作 为 传 送 单 位 ， 不 先 建立连 接 就 能 向 其他 主 机 发 送 分 组

保证可靠性 的 网 络 协 议 ； 分 布 式 多 路 由 的 分 组 交 换 网 ， 使 网 络 有 很 好 的 生存性

分 组 交 换 也 带 来 一 些 新 的 问 题 。 例 如 ， 分 组 在 各 路 由 器 存 储 转 发 时 需 要 排 队 ， 这 就 会
造成一 定 的 时延 。 因 此 ， 必 须 尽 量 设 法 减 少 这 种 时 延 。 此外 ， 由 于 分 组 交 换 不 像 电 路 交 换 那
样 通 过 建立连接来保证通信 时 所 需 的 各种 资 源 ， 因 而 无法确 保通信 时 端 到 端所 需 的 带 宽 。

分 组 交 换 带 来 的 另 一 个 问 题 是 各 分 组 必 须 携 带 的 控 制 信 息 也 造 成 了 一 定 的 开 销

(overhead) 。 整 个 分 组 交换 网 还 需 要 专 门 的 管 理 和 控 制 机 制 。

应 当 指 出 ， 从 本 质 上 讲 ， 这 种 断 续 分 配 传 输 带 宽 的 存 储 转 发 原 理 并 非 是 全 新 的 概 念 。

自 古 代 就有 的 邮政通信 ， 就 其 本 质 来 说 也 属 千 存 储 转 发 方 式 。 而 在 20 世 纪 40 年代 ， 电报通
信 也 采 用 了 基 千 存 储 转 发 原 理 的 报文 交 换(message switching) 。 在 报 文 交换 中 心 ， 一 份份 电
报被接收 下 来 ， 并 穿 成纸 带 。 操 作 员 以 每份报 文 为 单 位 ， 撕 下 纸 带 ， 根 据 报文 的 目 的 站地址 ，

拿 到 相 应 的 发 报机转 发 出 去 。 这 种 报 文 交换 的 时 延 较长 ， 从 几 分 钟 到 几 小 时 不 等 。 现 在 报 文

交换 已 不 使 用 了 。 分 组 交 换 虽 然 也 采 用 存储转 发 原 理 ， 但 由 千 使 用 了 计 算 机 进 行 处 理 ， 因 此

分组 的 转 发 非 常迅速 。 例 如 ， ARPANET 建 网 初 期 的 经验表 明 ， 在 正 常 的 网 络 负 荷 下 ， 当 时

横跨美 国 东 西 海岸 的 端 到 端 平 均 时 延 小 千 0. 1 秒 。 这样 ， 分 组 交 换 虽 然 采 用 了 某 些 古 老 的 交
换 原 理 ， 但 实 际 上 已 变成 了 一种 崭 新 的 交 换技 术 。

图 1 - 1 1 显 示 了 电路 交 换 、 报 文 交 换 和 分 组 交换 的 主 要 区 别 。 图 中 的 A 和 D 分 别 是 源 点
和 终 点 ， 而 B 和 C 是 在 A 和 D 之 间 的 中 间 节 点 。 图 的 最 下 方 归 纳 了 三种 交换 方 式 在 数 据 传
送 阶段 的 主 要 特 点 ：

电路交换
报 文 交 换一 整 个 报 文 先 传 送 到 相 邻 节 点 ， 全 部 存 储 下 来 后 查 找 转 发 表 ， 转 发 到 下 一

整 个报 文 的 比特流连续地从源 点 直达 终 点 ， 好像 在 一 个 管 道 中 传送 。

个 节 点 。

分 组 交 换

单 个 分 组 （ 这 只 是 整 个 报 文 的 一 部 分 ） 传 送 到 相 邻 节 点 ， 存 储 下 来 后 查

找 转 发 表 ， 转 发 到 下 一 个 节 点 。

•  1 6  •

电路交换

报 文 交 换

分 组 交换

文
亡

连接建

数据传送

连接释放

A

B

C

D

A

B

C

D

A

B

C

D

数 据 传 送 比特流直达终 占
的 特 点 1  '一 ， 拿鹦｀畴修少
勹－－

报 叉 报 文 报 又
矿/厂
勹＿＿勹仁尸
存储 存 储
转 发 转 发

分组 分 组 分组

勹存 储 存储

转 发 转 发

图 1 - 1 1 三种交换 的 比 较 。 电路交换 、 报 文 交 换 、 分 组 交 换 ， P 1 � P4 表示 4 个 分 组

从 图 1 - 1 1 可看 出 ， 若 要 连 续 传 送 大 量 的 数据 ， 且 其 传送 时 间 远 大 于 连 接 建 立 时 间 ， 则

电 路 交 换 的传输速率较快 。 报 文 交 换 和 分 组 交 换 不 需 要 预 先 分 配传输 带 宽 ， 在 传 送 突 发 数 据
时 可 提 高 整 个 网 络 的 信 道 句利 用 率 。 由 于一个分组的长度往往远 小 于 整 个报 文 的 长度 ， 因 此分
组 交 换 比报 文 交换 的 时 延 小 ， 同 时 也 具 有 更 好 的 灵 活 性 。

在 过 去 很 长 的 时 期 ， 人 们 都 有 这 样 的 概 念 ： 电 路 交 换 适 合 千 话 音 通 信 ， 而 分 组 交 换 则

适 合 千 数据 通 信 。 然 而 随 着 蜂 窝 移动 通信 的 发展 ， 这 种 概 念 已 经 发 生 了 根 本 的 变化 。 从第 四

代 蜂 窝 移 动 通 信 网 开 始 ， 无 论 是 话 音 通 信 还 是 数据通 信 ， 都 要 采 用 分组交换 （ 见第 9 章 9.3

节 有 关 蜂 窝 移 动 通 信 网 的 讨 论 ） 。

1 .4  计算机网络在 我 国 的 发 展

下 面 简 单 介绍 一 下 计 算 机 网 络 在 我 国 的 发 展 情 况 。
最 早 着 手 建 设 专 用 计算机广 域 网 的 是铁 道 部 。 铁 道 部 在 1 980 年 即 开 始 进 行 计算机联 网
1 989 年 1 1 月 我 国 第 一 个 公 用 分 组 交 换 网 CNPAC 建 成运 行 。 在 20 世 纪 80 年代 后 期 ，
实 验 。
公 安 、 银行 、 军 队 以 及其 他 一些 部 门 也 相 继 建立 了 各 自 的 专 用 计 算机广域 网 。 这对迅速传递
重 要 的 数据 信 息起着重要 的 作 用 。 另 一 方面 ， 从 20 世 纪 80 年 代 起 ， 国 内 的 许 多 单位 相 继 安
装 了 大量 的 局 域 网 。 局 域 网 的 价 格便 宜 ， 其 所 有 权 和 使 用 权 都 属 千 本单 位 ， 因 此便 千 开 发 、

管 理 和 维 护 。 局 域 网 的 发展 很 快 ， 对 各 行 各 业 的 管 理现代化和 办 公 自 动 化起到 了 积极 的 作 用 。

这 里 应 当 特别 提 到 的 是 ，

1 994 年 4 月 20 日 我 国 用 64 kbit/s 专 线 正 式 连 入 互联 网 。 从 此 ，

我 国 被 国 际 上 正 式承认为接入互联 网 的 国 家 。 同 年 5 月 中 国 科 学 院 高 能物 理 研 究 所 设 立 了 我

CD 注 ： 信 道(channel)是 指 以 传输媒体 为基础 的 信 号 通 路 （ 包括有线 或 无 线 电线 路 ） ， 其 作 用 是 代 输 信 号 。

•  1 7  •

