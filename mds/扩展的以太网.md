成）， 它 由 两个字段 构成。 第

个字段是 7个字 节的 前同步码 ( 1和 0 交替 码）， 它的作用是

一

使接收端的 适配器在接收 MAC 帧时能够 迅速调 整 其时钟频率， 使它和发送端的时钟同步，

“

”

也就是

实现位同步

（位同步就是比特同步的意 思）。 第 二个字段是 帧开始定 界符， 定义为

一

10 10 10 11。 它的前 六位的作用和前同 步 码
“MAC 帧的信息 马上就要来了， 请 适配器 注意接收。 ” MAC 帧的 FCS字段的 检验范 围不包

样， 最后的 两个连 续的 1就是 告 诉接收端 适配器 ：

括前同步 码和 帧开始定 界符。 顺 便 指出， 在使用 SONET/SDH进行同步传输时 则不需要用前

一

同步 码， 因为在 同步传输 时收发 双方的位同步 总是

直保持着的。

还需 注意， 在以 太网上传送数据时是以 帧为单位传送的。 以 太网在传送 帧时， 各 帧 之

一

间 还必须有
就都属于 同

一

定的间 隙。 因此， 接收端 只要 找 到 帧开始定 界符， 其后 面的连 续 到达的比特 流
个 MAC 帧。 可见以 太网不需要使用 帧结 束定 界符， 也不需要使用字 节插入来

保证 透明传输。

一

IEEE 80 2.3标准规定 凡出现下 列情况之
(1) 帧的 长度不 是 整数个字 节 ；
(2) 用收 到的 帧检验序列 FCS 查出有差错 ；
(3) 收 到的 帧的 MAC 客户数据字段的 长度不在 46

的 即为无效的 MAC 帧 ：

~

150 0 字 节之间。 考虑 到 MAC 帧 首

部和 尾部的 长度 共有 18 字 节， 可以 得出有效的 MAC 帧 长度为 64 ~ 1518 字 节之间。

对于 检 查出的无效 MAC 帧就 简单地 丢 弃。 以 太网不 负 责重传 丢 弃的 帧。

一

最后要 提
一

式的 区别就是以下三点。

下， IEEE 80 2.3标准规定的 MAC 帧格式与上面所 讲的以 太网 V2 MAC 帧格

“

”

第

， IEEE 80 2.3规定的 MAC 帧的 第 三个字段是

长度 ／类 型

。 由于以 太网有效 帧的

“

”

“

类 型

段就表示

最 大 长度是 1518 字 节。 因此当这个字段 值大千 Ox0 60 0 时（相当千 十进制的 1 5 36 )， 这个字
样。 只有当这个字段 值
， 即 MAC 帧的数据部分 长度。 显 然， 在这种情况 下， 若数据

。 这样的 帧格式就和以 太网 V2 MAC 帧格式完 全

小于 Ox0 60 0 时 才表示
字段的 长度与 实 际的 长度字段的 值不
经 讲过， 由 于以 太网采用了曼彻斯特编码， 长度字段本来并无实 际意义。

致， 则 该 帧为无效的 MAC 帧。 实 际上， 前 面我 们 已

长度

一

“

“

”

一

第 二， 当
LLC子层的 LLC 帧。

长度 ／类 型

字段 值 小千 Ox0 60 0 时， 数据字段必须装入上 面的 逻辑链路 控制

第 三， 在 80 2.3标准的 文 档中， MAC 帧的 帧格式包括了 8 字 节的前同步 码和 帧开始定

界符。 有些教科书也是这样 引用的。 不过这并不 影 响我 们对以 太网工作原 理的 理解。

由千现在广泛使用的 局域网 只有以 太网， 因此 LLC 帧 已经 失 去了原来的意义（见本章

”

”

以 太网的 两个 主要标准

3 . 3 .1 节 第 1 小 节
但 大 家也常常把它称为 IEEE 80 2. 3标准的 MAC 帧。
3 .4 扩展的 以太 网

)。 现在 市 场上 流行的都是以 太网 V2的 MAC 帧，

在 许多情况下， 我们 希 望把以 太网的 覆 盖范 围 扩 展。 本 节先讨论在物理层把以 太 网 扩

扫 一扫

展， 然后讨论在数据链路层把以 太网 扩展。 这 种扩展的 以太网在网络 层 看 来

一

仍然是
3.4. 1  在物理层 扩展 以 太 网

个网络。

以 太网上的 主机之间的 距 离不能 太远（例如，lOBASE-T以 太网的 两 台

视频讲解

•  99  •

主 机 之 间 的 距 离 不 超过 2 00 m ) ， 否 则 主 机 发送 的 信 号 经 过铜 线的 传 输 就 会 衰 减 到使

CSMA/CD 协议无法正常工作 。 在过去广泛使用粗缆或细缆以太网时， 常使用工作在物理层
的转发器来扩 展 以太 网的地理覆 盖 范 围 。 那 时 ， 两个网段可用一个转发器连接起来。 IEEE
8 02.3 标准还规定， 任 意 两个站之间最多可以经过三个 电 缆网段。 但 随 着 双 绞线以太网成为

以太网的主流 类 型 ， 扩展以太 网的覆盖 范 围 已很少使用转发器 了 。

现 在 ， 扩 展 主机和集线器之间的 距 离 的一 种简单方法就是使用光 纤（通常是 一对光 纤 ）

和一对光纤 调制解 调器 ， 如 图3-23 所示。

光 纤

以 太 网 集线器

光 纤
调制解调器

光 纤
调制解调器

图 3-23 主机使 用 光 纤 和 一对 光 纤调制解调器连接 到 集 线 器

光 纤 调制解 调器的作 用就是进 行 电 信 号和光 信 号 的转换。 由 千 光 纤带来的时延很小 ，

并且带宽很宽 ， 因 此使用这种方法可以很容 易 地使主机和几公里以外的集线器相连接。

如果使用多个集线器 ， 就 可以连接成 覆 盖 更大范 围 的多级 星 形 结构的以太 网。 例 如 ，

一个学 院的 三 个系各有一个 lOBASE-T 以太网（如 图 3-24( a)所示） ， 可通过一个主干集线器
把各系的以太网连接起来， 成为一个更大的以太网（如图3-24(b)所示）。

三 个独立的碰撞域

一 个更 大的碰撞域

(a)

三 个独立的以 太 网

(b) 一

个 扩 展的 以 太 网

图3 -24 用 多 个集线器连成更大的 以 太 网

这样 做 可以有以下两个好 处。 第一 ， 使这个学 院 不 同 系的以太 网上 的计算 机能够进 行
跨系的通信。 第二 ， 扩大 了 以太网覆 盖的地理范 围。 例如 ， 在一个系的 lOBASE-T 以太网中，
主机与集线器的最大距离是100 ill, 因 而两台主机之间的最大 距 离是2 00 m。 但在通过主干
集 线器相连接后 ， 不 同 系的 主机之间的 距离就 可扩 展 了 ， 因 为集 线器之间的 距 离 可以是

1 00m（使用双绞线） 或更远（如使用光纤）。

但这种多级 结构的集线器以太网也带来 了 一 些缺点。
(1)如图 3-24( a)所示的例子， 在 三 个系的以太网互连起来之前 ， 每一个系的 lOBASE-T
以太网是一个独立的碰撞域( colli sion domain , 又称为冲 突域） ， 即在任 一时刻 ， 在每一个碰
撞域中只能有一个站在发送数据。 每一个系的以太网的最大吞吐量是 10 Mbit/s, 因 此三个
系总的最大吞吐量是 30 Mbit/s。 在三个系的以太网通过集线器 互 连起来后就把三个碰撞 域
变成 一个碰撞域（范 围 扩大到三个系） ， 如 图 3-24(b)所示 ， 而这时的最大吞吐量仍然是一个
系的吞吐量1 0 Mbit/s。 这就 是说 ， 当 某个系的两个站 在通信 时所传送的数据会通过所有的
集线器进行转发， 使得其他系的内部在这时都不能通信（一发送数据就会碰撞）。

• 100 •

(2)如果不 同 的系使用不 同 的以太网技 术（如数据率不 同 ） ， 那 么 就不可能用集线器将
它们互连起来。 如果在图 3-24 中 ， 一个系使用 10 Mbit /s 的适 配器 ， 而 另 外 两个系使用
10/100  Mbit /s 的适配器 ， 那么用集线器连接起来后 ， 大家都只能工作 在 10 Mbit /s 的速率。
集线器基本上是个多端 口 （也称为接 口 ） 的转发器 ， 它并不能把帧进行缓存。

3.4.2  在数据链路层 扩 展 以 太 网

扩 展以太网更常用的方法是在数据链路层进 行 的。 最 初 人们使用的是

网桥(b ridge)。 网桥对收到的帧根据其 MAC 帧的目的地址 进 行 转 发 和过滤。
当 网桥收到一个帧 时 ， 并不是 向 所有的端 口 转发此帧 ， 而 是根 据此帧的目
的 MAC 地址 ， 查找网桥 中的地址表 ， 然后确定将该帧转发到哪 一个端 口 ， 或者是把它 丢 弃
（即过滤）。

视频讲解

199 0 年问世的交换式集线器( switching hub)， 很快就淘汰 了 网桥。 交换式集线器常称为

以太网交换机( switch)或第二层 交换机( L2 switch)， 强调这种交换机工作在数据链路层。

“

交换机 ”

并无准确 的定义和明 确的概念。 著名网络专 家 Perlman 认为： “ 交换机 ” 应
当 是一个市场 名 词 ， 而交换机的 出 现的确使数据的转发更 加 快速 了 [PER LOO]。 本 书 也使用
这个广 泛被接受的名词 以 太 网 交换机。 下面简单地介绍以太网交换机的特点。

1 . 以 太 网 交换机的特点

以太网交换机实质 上就 是一个 多 端 口 的 网 桥 ， 通常都有十几个或更 多的端 口 ， 和工 作
在物理层的转发器、 集线器有很大的差别 。 以太网交换机的每个端 口 都直接与 一个单台主机
或另 一个以太网交换机相连 ， 并且 一般都工 作在全双工方式。 以太网交换机还具有并行性 ，
即能 同 时连通 多对端 口 ， 使多对主机能 同 时通信（而网桥只能一次分析和转发一个帧）。 相
互通信 的主机都独 占传输媒体 ， 无碰撞地传输数据。 换句 话 说 ， 每一个端 口 和连接到端 口 的
主机构成 了 一个碰撞域 ， 具有 N 个端 口 的以太网交换机的碰撞域共有 N个。

以太网交换机的端 口 还有存 储 器 ， 能在输出 端 口 繁 忙 时把到来的帧 进 行 缓存 。 因 此 ，
如果连接在以太网交换机上的两 台主机 ， 同 时 向 另 一台主 机发送帧 ， 那 么 当 这台主机的端 口
繁忙时， 发送帧的这两 台主机的端 口 会把收到的帧 暂 存 一下， 以后再发送 出 去。

以太网交换机是一 种 即插即用设备 ， 其内部的帧 交 换表（又称为地址表） 是通过自 学
习 算法 自 动 地 逐 渐建立起 来的。 实际上 ， 这种 交换表 就 是 一个 内 容 可 寻 址 存 储 器 CAM
(Content Add res sable Memory)。 以太网交换机 由 于使用 了 专用的交换结构芯 片 ， 用硬件转发
收到的帧 ， 其转发速率要比使用软件转发的网桥快很多 。

以太网交换机的性能远远 超过普 通的集线器 ， 而 且 价 格 也不贵 ， 这就使工 作 在物理层

的集线器逐渐地退 出 了 市场。

对千 传统的10 Mbit /s 的共 享 式以太网 ， 若共有 1 0 个 用户 ， 则 每个用户 占 有的平 均 带
宽只有 1 Mbit /s。 若使用以太网交换机来连接这些主机 ， 虽然在每个端 口 到主机的带宽还是
10 Mbit /s, 但 由 于 一个用户 在通信 时是独 占而不是和其他网络用户共享传输媒体的带宽， 因
此对于拥有10个端 口 的交换机的总容量 则 为100 Mbit /s。 这正 是交换机的最大优点。

从共 享 总线以太网转到交换式以太网时 ， 所有接入 设备的软件和硬件、 适 配器等都不

需要做任何改动。

以太网交换机一般都具有多种速率的端 口 ， 例如， 可以具有10 Mbit/s,  1 00 Mbit /s 和1 Gbit/s

的端 口 的各种 组合 ， 这就大大方便 了 各种 不同情况的用户 。

• 101 •

虽 然 许 多以太网交换机对收到的帧采用存 储 转 发方式进 行 转 发 ， 但也有 一 些交换机采
用直通( cut-th rough)的交换方式。 直 通交换不必把整个数据帧 先 缓存后再进 行 处理 ， 而是在
接收数据帧的同时就立即按数据帧的目的 MAC 地址决定该帧的转发端 口 ， 因 而提 高 了 帧的

转发速度。 如果在这种交换机的内部采用基于 硬件的交叉矩 阵 ， 交换时延就非常小。 直通交
换的一个缺点是它不检 查 差 错就 直接将 帧转发出去 ， 因 此有可能也将一 些无效帧转发给其他
的站。 在某些情况下 ， 仍 需要采用基千软件的存储转发方式进行交换， 例如 当 需要进行线路
速率匹 配、 协议转换或差错 检测时。 现在有的厂 商 己生产出能支持两 种交换方式的以太网交
换机。 以太网交换机的发展 与建筑物结构化布线系统的普及应用密 切相关。 在结构化布线系
统中， 广 泛地使用 了 以太网交换机。

2 . 以 太 网 交换机的 自 学 习 功 能

我们用一个简 单例子来说明 以太网交换机是怎样进行 自 学 习 的。
假定在图 3-25 中的以太网交换机有 4 个端 口 ， 各连接一台计算 机 ， 其 MAC 地址分别
是A, B,  C 和 D。 交换表最重要的就是两个项目： 目的 MAC 地址和转发端 口 。 在一开始 ， 以
太网交换机里面的交换表是空的（如图3-25( a)所示）。

c

A 从端 口 l 发送
B 从端 口 3 发送

一

一

帧给 B
帧 给 A

一

(a) 交换表

开 始 是 空的

(b) 交 换 了 两 帧 后的交换表

图 3-25 以 太 网 交换机 中的交换表

假定A 先 向 B 发送一 帧 ， 从端 口 1 进入到交换机。 交换机收到帧后 ， 先 查找交换表。

现在表中没有 B 的地址。 千是 ， 交换机把此帧的源地址 A 和端 口 1 写 入交换表中， 并向 除
端 口 1 以外的所有端 口 广播这个帧（从端 口 1 收到的帧显 然不应再从端 口 1 转发出去）。

广 播发送可以保 证 让B收到这个帧 ， 而 C 和 D 在收到帧后， 因 目的地址不匹配将 丢 弃

此帧。 这一过程也称为过滤。

由 千在交换表中写 入 了 项目(A, 1) ， 因 此以后不管从哪个端 口 收到帧 ， 只要其 目 的 地址
是 A, 就把收到的帧从端 口 1 转发出去送交 A。 这样做的依据是： 既然 A 发送的帧是从端
口 1 进入交换机的 ， 那么从端 口 1 转发出的帧肯定到达A。

接下来假定 B 通过端 口 3 向 A 发送一 帧。 交换机查找交换表 ， 发现交换表中的 MAC
地址有A, 表明 凡是发给A的帧（即 目 的地址为A 的帧） 都应从端 口 1 转发。 显 然 ， 现在
应直接把收到的帧从端 口 1 转发给A, 而没有必要再广播收到的帧。 交换表这时用源地址 B
写 入 一个项目(B,3)， 表明 今后如有发送给B的帧 ， 应从端 口 3 转发。

经过一段时间后 ， 只要主机 C 和 D 也 向 其他主机发送帧 ， 以太网交换机中的交换表就
会把转发到C 或 D 应 当 经过的端 口 号 (2 或4 ) 写 入交换表中。 这样 ， 交换表中的项 目 就逐
渐 增 多 了 ， 以后再转发帧时就可以直接从交换表中找到转发的端 口 ， 而不必使用发送广播帧

• 102  •

的方法 了 。

考虑到有时可能要在交换机的端 口 更换主机， 或者 主机要更换其 网络适配器， 这就 需
要及时更改交换表中的项目。 为此， 当 交换表中写入 一个项目时就记下当 时的时间 ， 只要超
过预 先 设定的时间 （例如 3 00 秒）， 该项目就 自 动被删 除。 用这样的方法保证 交换表中的数
据都符合 当前网络 的实际状况。 这就是说， 图 3-25 中的交换表实际上是有 三 列 ， 即 MAC
地址、 端 口 和写 入时间。

以太网交换机的这种 自 学 习 方法使得 以太网交换机能够即插即用， 不必人 工 进 行 配 置，

因 此非常方便。

但有时为了 增 加网络的可靠 性， 在使用以太网交换机组网时， 往往会 增 加一 些冗 余的
链路。 在这种情况下， 自 学 习 的过程就可能导致以太网帧在网络的某个环 路 中 无限制地兜 圈
子。 我们用图3-26 的简单例子来说明 这个问题。

在图3-26 中， 假定一开始主机A通过端 口 交换机＃l 向 主机B发送一 帧 O 。
由 千交换表目前是 空 的， 因 此交换机＃l 收到帧 0 后就 向 本交换机的所有其他端 口 进行

广 播发送。 我们现在观 察其中一个帧的走向：

离开交换机＃ l 端 口 3 的帧 ＠到达交换机＃2 端 口 1, 然后向交换机＃2 所有其他端 口 广播

发送；

广 播发送的帧 中 有一个帧 ＠到达 交换机＃2 端 口 2;
交换机＃2 端 口 2 把这个帧（帧 0 ) 发送到交换机＃l 端 口 4, 接着又向 交换机＃1 所有其

他端 口 广 播发送帧 ；

广 播发送的帧中有一个帧 0到达 交换机＃l 端 口 3 ;

上述 过程就这样无限制地循 环 兜 圈子 ( O 一 ＠ － 0 － 0 ) 。 显 然， 这就 白 臼 消 耗 了 网络

资源。

以 太网
交换机＃ 1

以太网
交换机＃2

A

l O 三

图3-26 在 两个交换机之 间 兜 圈 子的帧

为了 解决这种兜 圈子问题，

IEEE 的 8 02. I D 标准制定 了 一个生 成树协议 ST P ( Spanning
T ree  Protocol)。 其要点就是不改变网络的实际拓 扑， 但在逻辑上则 切 断某些链路， 使得 从一
台主机到所有其他主机的路径是无环路 的树状结构， 从而消 除 了 兜 圈子现 象。

3. 从 总线 以 太 网 到 星 形 以 太 网

大 家 知 道， 传统的 电 话网是星 形 结构， 其中心就是 电 话交换机。 那么在 2 0 世 纪 7 0 年

代中期出现的局 域 网 ， 为什么不采用这种星 形结构呢？这是因 为在 当 时的技术 条件下， 还很

难用廉价的方法制造出高可靠性的以太网交换机。 所以那 时的以太网就采用无源的总线结构。
这种总线式以太网一问世就 受到广 大用户的欢迎， 并获得 了 很快的发展。

然 而 随 着 以太 网 上站 点数目的增 多， 使得 总线结构以太 网的可靠 性下降。 与此同时，
大规模集成 电 路以及 专用芯 片的发展， 使得 星 形 结构的以太网交换机可以做得 既便 宜又可靠。
在这种情况下， 采用以太网交换机的星 形 结构就成为以太网的首选拓扑， 而传统的总线以太

• 103  •

网 也很快从市场上消 失 了 。

总线以太 网 使用 CSMA/CD 协议 ， 以半双 工方式工 作 。 但以太网 交换机不使用共享总
线， 没有碰撞问题， 因 此不使用CSMA/CD 协议 ， 而是以全双 工方式工作。 既然连以太网的
重要协议 CSMA/CD 都不使用 了 （相关的 “ 争 用期 ” 也没有 了 ）， 为什么还叫 作 以太网呢？
原 因 就是它的帧 结构未 改变 ， 仍然采用 以太 网 的 帧结构。

3.4.3  虚 拟 局 域 网

便

包

：

的

扫 一 扫

／

有

整

／

／

：

／

/

//／ 成i

//

：／：／求／
／／

／

／

／／

换

：p这差：无缺/:J
／

逻

虚 拟 局 域 网 其实只是局域网给用 户 提供 的 一种服务 ， 而并不是一种新型局域网。
1988 年 IEEE 批准 了 8 02.3ac 标准 ， 这个标准定义 了 以太网的帧格式的扩展 ， 以便支持虚
拟 局 域 网 。 虚 拟 局 域 网 协议 允 许 在以太网 的帧 格式中插入 一个4字节的标识 符 （ 如图3-27
所示） ， 称为 VLAN 标签( tag)， 用来指明 发送该帧的计算机属 千哪 一个虚 拟 局 域网。 插 入
VLAN 标签的帧称为8 02. l Q 帧。

／／

6

4

802. I Q 帧

2

字 节

6

以 太 网
MAC 帧

46 - 1 500

数 据

4

FCS

0 0 0 0 0 0 1  0 0 0 0 0 0 0 0

呵

2 字节

· ..

2 字节

伽

图 3-27 插入 VLAN 标签后 变成 了 802. l Q 帧

VLAN 标签字段的长度是4字节， 插入在以太网 MAC 帧的源地址字段和类 型字段之间。

VLAN 标签的前 两个字节总是设置为 Ox8100（即二进制的 10000001 00000000) ， 称为IEEE
• 104  •

802.lQ 标签类型。 VLAN 标签的后两个字节中， 前面 4 位实际上并没有 什么作 用， 这里不
讨论， 后 面 的 12 位 是该虚 拟 局 域 网 VLAN 标识符 VID ( VLAN  ID)， 它 唯 一 地 标 志 了
802.lQ 帧 属 于 哪 一个 VLAN。 12 位的 VID 可识别4096 个不同 的 VLAN。 插入 VLAN 标签
后， 802.lQ 帧最后的帧检 验序 列 FCS 必须 重新计算。

当 数据链路层检测到 MAC 帧的源地址字段后面的两个字节的值是 Ox8100 时， 就 知 道
现在插入 了 4字节的 VLAN 标签。 由 千用于 VLAN 的以太网帧的首部增加 了 4 个字节， 因
此以太网的最大帧长从原来的1518字节 (1500 字节的数据加上 18字节的首部和尾部 ） 变
为1522字节。

这样的 8 02.lQ 帧在 什么地方使用呢？我们可以用图3-28 给 出 的简 单例子来说明 。 交换
机＃l 连接 了 7 台计算机， 组成 了 一个局 域网（一个广播域 ）。 现在把局 域网划分为两个虚拟
局 域 网 VLAN-10 和 VLAN-2 0。 这里的10 和2 0 是虚拟局 域网的编 号， 由 交换机管理人 员 设
定。 这个编 号就是图3-27 中的 VID字段的值。

』:：飞 ，  交换机＃

I

I

接入链

护一／

VL/1+0 \  /

L/2\

I汇 聚链路1 …. ...凭 屈 ．．… ．

0  点罕 v三

图 3-28 利 用 以 太 网 交换机构成虚拟局 域 网

现在我们有 了 两个较 小 的广 播域。 每台计算机都是通过接入链路( acces s

lin k )连接到以
太网交换机的。 管理人 员 划分虚拟局 域网的方法有多种。 例如， 按交换机的端 口 划分， 或按
MAC 地址划分。 每台主机并不知 道 自 己的 VID 值 （ 但交换机必须 知 道这些信 息 ）。 这些主

机通过接入链路发送到交换机的帧都是标准的以太网帧。

在一个用多个交换机连接起 来的较大的局 域网中， 可以灵活地划分虚 拟 局 域网， 不 受
地理位置的限制。 一个虚拟局 域网的范 围 可以跨越不同的交换机。 当 然， 所使用的交换机必
须 要能够识别和处理虚拟 局 域 网。 在图3-28 中， 在另外一层楼的交换机＃2 连接 了 5 台计算
机， 并与交换机＃l 相连接。 交换机＃2 中的两 台计算机加入到 VLAN-10, 而 另 外3 台加入到
VLAN-20。 这两个虚拟局域网虽然都跨越 了 两个交换机， 但都各 自 是一个广播域。

连接两个交换机端 口 之间的链路称为汇聚链路(trun k link)或干线链路。
现在假定A向B发送帧。 由 于交换机＃l 能够根据帧首部的目的 MAC 地址， 识别B属
千本交换机管理的 VLAN-10 , 因 此就像在普通以太 网中那 样直接进 行 帧的转发， 不需要使
用 VLAN 标签。 这是最 简 单的情况。

现在假定A向 E 发送帧。 交换机＃l 查到 E 并没有连接到本交换机， 因 此必须 从汇 聚链
路把帧转发到交换机＃2, 但在转发之前， 要插入 VLAN 标签。 不插 入 VLAN 标签， 交换机
#2 就不知 道应把帧转发给哪 一个 VLAN。 因 此在汇 聚链路传送的帧是 802.lQ 帧。 交换机＃2
在 向 E 转发帧之前， 要拿走 已插入的 VLAN 标签， 因 此 E 收到的帧就是A发送的标准以太

网帧， 而 不是 802.lQ 帧。 图3-28 说明 了 这种情况。

如果 A 向 C 发送帧， 情况又 怎样呢？这种情况就 复 杂 些了 ， 因 为这是在不同 网络之间
的通信 。 虽然A和C 都连接到同 一个交换机， 但它们 已经处在不同的网络中 ( VLAN-1 0 和

• 105  •

VLAN-20 )。 这 问题是 互连网络中的通信 问 题， 已经 超过了本章数据链路层的范围。 这要 由

属 千 上面的网络层中的路 由器来解 决。

一

不过有的交换机中 嵌 入了

个用 专用 芯 片 构成的转发 模 块， 用来在不同的 VLAN之间

转发 帧。 这样就可以不必 再 使用另外的路 由器， 而就在交换机中实 现了 第 3 层的转发 功能

（ 由 千使用硬件转发， 转发 帧的速率 提高了， 比使用路 由器要 快）。 这种转发 功能被称为 第

3 层交换， 而这种交换机常称为 L3/L2交换机。

有了这种 第 3层交换机， 连接到不同交换机的 A和 F, 都能不 需要经过另外的路 由 器

而 相 互通 信。 更 详 细的转发过程这 里就 不 继续讨论了。
3 . 5   高速 以太 网

随 着电子技术的发 展， 以 太网的速率也 不 断提升。 从传 统的 10 Mbit/s以 太网

直发 展
到 现在常用的速率为 1 Gbit/s的 吉比特以 太网， 甚至更 快的以 太网。 下面 简 单介绍几种高速

一

以 太网技术。
3 .5 . 1

l OOBASE-T 以 太 网

l OOBASE-T是在 双绞线上传送 10 0 Mbit/s基带信号的 星 形 拓 扑以 太网， 仍使用 IEEE

80 2.3的 CSMA/CD协议， 它 又称为 快速以太网( Fast Ethernet)。用户 只要使用 10 0 Mbit/s的 适配

器和 10 0 Mbit/s的 集线器或交换机， 就可很方 便地 由lOBASE-T以 太网 直接 升级到 10 0 Mbit/s,

而不必 改变网络的 拓 扑结 构。 所有在 l OBASE-T上的 应用 软件和网络 软件都可 保 持不变。

I OOBASE-T的 适配 器有很强的 自 适应性， 能够 自 动 识别 10 Mbit/s和 10 0 Mbit/s。 1 995 年
IEEE 已把lOOBASE-T 快速以 太网定为 正式标准 ( IEEE 80 2.3u )， 是 对 现行的 IEEE 80 2.3标

准的 补 充。

lOOBASE-T可使用以 太网交换机 提供很好的服务 质量， 可在 全 双工方式下 工 作而 无冲

一

突发 生。 因此， CSMA/CD协议 对 全 双 工方式 工 作 的快速以 太网是不 起 作用的（ 但在 半双 工
定要使用 CSMA/CD协议）。 快速以 太网使用的 MAC 帧格式仍然是 IEEE

方式 工 作时则

80 2.3标准规定的 帧格式。

然 而 IEEE 80 2.3u的标准未包括 对同 轴电缆的 支 持。 这意 味 着 想从细缆 以太网升级到快
速 以太网的 用 户 必须重新布线。 因此， 现在 I0 /10 0  Mbit/s以 太网都使用 无屏蔽双绞线 布线。
一

10 0  Mbit/s以 太 网的 新标准改 动 了原 10 Mbit/s以 太网的某些规定。 我 们知 道， 以 太网有

个 重要的参数 a, 它必须保持为很 小的数 值。 在 3 .3 .4 节 曾给出 了参数 a的公式 (3 -2)
a = —

:

(3 -2)

这里 r是以 太网 单程端到端时 延， 几是 帧的发送 时间。 我们知道， To是 帧长与发送速率

一

之比， 可见为 了 保待参数 a 不变， 可以使 r与发送速率的 乘积不变。 在 帧 长

一

定的条件下，

若数据率 提高到 10 倍， 可把网络电 缆长度（ 因 而使 r) 减 小 到原有数 值的 十分之

。

一

在 10 0 Mbit/s的以 太网中采用的方 法是 保 持最 短 帧长不变， 对 于 铜缆 10 0 Mbit/s以 太网，

个网段 的 最大 长度是 10 0 m, 其 最 短 帧 长仍为 64字 节， 即 512比特。 因此 10 0 Mbit/s以

太网 的 争用 期是 5 .12 µs, 帧间 最 小间 隔 现在是 0 .96 µs, 都是 10 Mbit/s以 太网的 1/ 10。

• 10 6  •

