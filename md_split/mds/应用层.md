第 6 章 应 用 层

在前五 章 我们 已经详细地讨 论 了 计算机网络 提供 通信 服 务的过程。 但是我 们 还没有讨

论这 些 通信 服 务 是如 何 提供给应用进程来 使用的。 本章 讨 论 各种应用进程通过什么样的应用

层协 议 来 使用网络所 提供的这 些 通信 服 务。

在上 一 章 ， 我们 已 学 习 了运输层为应用进程 提供 了 端 到 端的通信 服 务。 但不 同 的网络
应用的应用进程之 间， 还 需要有不 同的通信规则。 因此在运输层协议之上， 还需要有应 用 层
协议(application laye r protocol )。 这 是 因为， 每个应用层协议都是为了解决某一类应用问题，
而问题的解决 又必须通过位于 不 同 主机 中 的 多 个 应 用 进程之 间 的 通信和协同 工作来完成。 应
用进程之 间的这种通信必须遵循严格的规则。 应用层的具 体 内 容就是精 确 定 义 这 些通信规则 。

具 体 来说， 应用层协议应当定义：

•  应用进程交换的报文类型， 如请求报 文和响应报文 。

•  各种报文类型的语法， 如报 文中的各个字段及 其详细描述。

•  字段的语义， 即 包含在字段中的信 息的含义 。

•  进程何时 、 如何发送报 文， 以 及对报 文进行响应的规则。

互 (cid:7110) 网 公 共领域的标准应用的应用层协议是由 RFC 文 档定义的， 大家都可以使用。 例

如， 万 维网的应用层协议 HTTP（ 超 文本传输协 议 ） 就是由建议标准 RFC 7230 定义的。 如

果浏 览器开发者遵 守 RFC 7230 标准， 所开发出来 的浏 览 器就(cid:7126)够访问任何 遵 守 该 标准的万

维网服务器并获取相 应的万 维网 页 面。 在互(cid:7110)网中还有很多其他应用的应用层协议不是公开
的， 而是专用的。 例如， 很多现有的P2P文 件 共 享系统使 用的就是 专用应用层协议。

请 注 意， 应 用层协 议 与网络应用并不是 同 一个概念 。 应 用层 协 议 只是 网络 应 用的一部
分。 例如， 万 维 网应 用是 一种基千客 户 ／服务器体 系 结 构的网络应用。 万 维 网应用包 含 很多
部件， 有万 维 网浏 览器、 万 维网服务 器 、 万 维网文 档 的格 式标 准， 以及 一个应用层协议。 万
维 网的应用层协议是 HTTP, 它定义了在万 维 网浏 览器和 万 维网服务器之 间传送的报 文类型 、
格 式和序 列 等 规则。而万 维网浏 览器如何显示一个刀 维网页 面， 万 维网服务 器是用多线程还
是用多进程来 实现， 则都不是 HTTP所定 义的 内 容。

应用层的许多协议 都是 基 于客 户 服 务 器 方 式。 即 使是 P2 P对等通信 方式， 实 质 上 也是
e rve r )都是指通信中所

一种特殊的客户 服务器方式。 这 里 再明确 一下， 客 户 (clie nt )和服 务器(s
涉及的两个应 用 进程。 客 户 服 务 器方式所 描述的是进程之 间 服 务和 被 服 务的关系。 这 里最主

要的特 征就是 ： 客户 是服务请求方， 服 务 器 是服务提供方。

下面先讨 论 许多应用 协 议都要使用的域 名系统。 在 介 绍 了文 件传送协 议和远程 登 录 协

议后， 再重点介 绍万 维网的工 作 原 理 及 其主要协 议。 由于万 维网的出现使互(cid:7110) 网得到了飞速

的发展， 因此万 维网在本章中 占有最大的篇 幅， 也是本章的重点。 接着讨 论用户经常使用的

电子邮件。 最后， 介 绍有关 网络 管理方面的问题以及有关网络编程的基本概念。 对应用层更

深入的学 习 可参 阅 [C OME1 5] [C OME0 6] [KU R01 7] [TAN E11 ] 及有关标准。

本 章 最重要的 内 容是 ：
( 1 ) 域名系统DN S

从域 名 解析出IP地址。

•  260

•

(2) 万 维网和 HTTP协议， 以及 万维网的 两种 不 同的信 息搜索 引 擎。
(3) 电子邮件 的传送过程， SM TP协议和 POP3 协议、
(4) 动态 主机配置协议 DHCP的特点 。
(5) 网络管理的三个组成部分 ( SNM P本身 、 管理信 息结构 SM I 和管理信 息库 M IB)

IMAP协议 使用的场合。

的作用。

(6) 系 统调用和应用编程接口的基本概念。

(7)  P2P文件 系 统。

域名 系统

D N S

6 . 1

6. 1 . 1   域 名 系 统概述

域名 系统 DNS (Domain  Nam e  System )是互联网使用的命 名 系 统， 用来把便于 人 们 使用
的机 器名 字转换 为 IP地址 。 域 名 系 统其实就是名 字系 统。 为 什么 不叫 “ 名 字 ” 而 叫 “ 域 名 “
呢？这 是 因为在 这种互联网的命 名 系 统中 使用了许 多 的 ＂ 域 ” (domain)， 因此就 出现了 ＂ 域
＂ 域名 系 统 ” 很明确地指明这种系 统是用在互联网中的。
名 “ 这 个名 词 。

许 多 应用 层软件经常直接使用域 名 系 统 DNS。 虽 然计 算 机的用户只是间 接 而 不是直接

使用域 名 系 统， 但 DNS 却为互联网的各种网络 应用提供了核心服务。

用户 与互联网上 某 台主机 通信时， 必须 要知道对方的 IP地址。 然而用户 很 难记住长达
32 位的二进制 主机地址。 即 使是点 分十进制 IP地址也并 不太 容 易记忆。 但在 应用 层为了便

千 用户 记忆各种网络 应用， 连接在互联网上的 主机 不仅 有 IP地址，而且 还有便于用户记忆
的 主机 名 字。 域 名 系 统 DNS 能够把互联网上的 主机名 字转换为 IP地址。

早 在ARPANET 时代， 整个网络上只有 数百 台计 算 机， 那时 使用一个叫 作 hosts 的文件，

列 出所有 主机 名 字和 相应的 IP地 址。 只要用户 输入 一 台 主机 名 字 ， 计 算 机就可很快地把这
台主机 名 字转换成 机器能够 识别的二进制 IP地址。

为什么 机 器 在 处理 IP数据报时 要 使用 IP地址 而 不 使用域 名 呢？这 是因为 IP地址的长
度是固 定的 32 位 （ 如果是 1Pv6地址， 那就是128 位， 也是定长的）， 而 域 名 的长度 并 不是

固 定的， 机 器 处理起来比 较 困 难。

从理论上讲， 整个互联网可 以只使用一个域 名 服务 器， 使它 装 入 互 联网上所有的 主机
名 ， 并 回 答所有对 IP地址的查询 。 然而这种做法 并 不可取。 因为互联网规模 很大， 这 样的
域 名 服务 器肯 定会 因过负 荷 而无法正常工 作， 而且一 旦 域 名 服务 器 出现故 障， 整个互联网就

会瘫痪。 因此， 早 在 1983 年互联网就开始采用 层次树状结构的命 名 方法， 并 使用分布 式的
域名 系统 DNS [RFC 1034, RFC 1035, STD13]。

互联网的域 名 系 统 DNS 被设 计成为一个联 机 分布 式 数据 库 系 统， 并 采用客户 服务器方
式。 DNS 使大多 数名 字 都在 本地进行解析(resolve)CD, 仅少量解析需要在 互联网上 通信 ， 因
此 DNS 系 统的效率 很高。 由千 DNS 是分布 式 系 统， 即 使单个计 算 机 出了故障， 也 不会妨碍

整个 DNS 系 统的正常运行。

心 注： 在 TCP/IP 的 文档 中 ， 这种地址转换常称为地址解析。 解 析 就 是转 换 的 意 思 ， 地址解析可能会包含 多 次 的查询请求

和 回 答过 程 。

•  261  •

